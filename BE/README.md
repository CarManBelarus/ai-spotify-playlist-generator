# AI Spotify генератар плэйлістоў

Праект на Google Apps Script, які выкарыстоўвае **Google Gemini AI** для стварэння персаналізаваных плэйлістоў Spotify і **Hugging Face** для генерацыі унікальных вокладак.

Гэты рэпазіторый утрымлівае набор дадатковых скрыптоў для бібліятэкі [Goofy](https://chimildic.github.io/goofy/), якія дазваляюць аўтаматызаваць і ствараць разумныя плэйлісты.

## Склад праекта

-   **Разумнае абнаўленне:** Штодня дадае новыя рэкамендацыі ў пачатак плэйліста.
    -   **Multi-Model AI:** Выкарыстоўвае разумную сістэму: калі асноўная мадэль (Gemini Pro) перагружана, скрыпт аўтаматычна пераключаецца на рэзервовую (Flash), каб гарантаваць вынік.
    -   **Прэміяльныя вокладкі:** Генеруе выявы праз тапавыя мадэлі **FLUX.1** (з рэзервам на Stable Diffusion 3 і XL).
    -   **Пошук на дзвюх мовах:** Разумее і шукае трэкі як на лацінцы, так і на кірыліцы (актуальна для лакальнай музыкі).

Праект складаецца з двух асноўных скрыптоў:

1.  ### `AI_Плэйлісты.gs` (Аўтаматычны штодзённы плэйліст)
    Гэта асноўны скрыпт для стварэння персанальнага "плэйліста адкрыццяў". Ён працуе ў аўтаматычным рэжыме па раскладзе.

    -   **Аналіз бібліятэкі:** Аналізуе вашы захаваныя трэкі (`SavedTracks.json`), каб зразумець вашыя густы.
    -   **Разумнае абнаўленне:** Штодня дадае новыя рэкамендацыі ў пачатак плэйліста, захоўваючы гісторыю, і выдаляе самыя старыя трэкі пры перавышэнні ліміту.
    -   **Аўтаматычная ачыстка:** Мае дадатковую функцыю для выдалення ўжо праслуханых трэкаў.

2.  ### `AI_Генератар.gs` (Універсальны генератар па запыце)
    Гэта гнуткі інструмент для аднаразовага стварэння тэматычных плэйлістоў. Ён кіруецца ўручную праз змену канфігурацыі.

    -   **Два рэжымы працы:** Можа ствараць плэйлісты як па тэкставай тэме (**Topic Mode**), так і на аснове існуючага плэйліста-ўзору (**Playlist Mode**).
    -   **Стварэнне або абнаўленне:** Дазваляе як ствараць цалкам новыя плэйлісты, так і цалкам перазапісваць існуючыя.
    -   **Інтэлектуальныя назвы:** Аўтаматычна генеруе кароткія і прыгожыя назвы для плэйлістоў на аснове вашага запыту.

---

## Інструкцыя па ўсталёўцы і наладзе

Гэта кіраўніцтва дапаможа вам наладзіць праект з нуля.

### Патрабаванні

-   Уліковы запіс Google (для Google Apps Script).
-   Уліковы запіс Spotify (рэкамендуецца Premium для поўнага доступу да API).
-   Уліковы запіс Hugging Face (бясплатны, для генерацыі вокладак).

---

### Частка 1: Пачатковая налада бібліятэкі Goofy

Гэты праект з'яўляецца дадаткам да магутнай бібліятэкі `goofy`. Яе правільная налада — самы важны крок.

1.  **Атрымайце беларускамоўную версію Goofy.**
    -   **[Спампаваць беларускамоўную бібліятэку Goofy](https://github.com/CarManBelarus/goofy)**
    Скапіруйце змест файлаў `library.js` і `config.gs`.

2.  **Выканайце афіцыйную інструкцыю па ўсталёўцы Goofy.**
    -   **[Афіцыйная інструкцыя па ўсталёўцы Goofy](https://chimildic.github.io/goofy/#/install)**
    Выканайце **ўсе крокі**, уключаючы аўтарызацыю і стварэнне першага плэйліста. Калі інструкцыя прапануе скапіяваць код, выкарыстоўвайце беларускамоўныя версіі з папярэдняга кроку.

3.  **Пачакайце, пакуль створыцца кэш.** Пасля налады Goofy патрабуецца час для стварэння файла `SavedTracks.json`. Гэта можа заняць ад некалькіх гадзін да сутак.

---

### Частка 2: Збор ID і API-ключаў

Збярыце наступныя даныя:

1.  **ID плэйліста Spotify:**
    *   Адкрыйце вэб-версію Spotify або праграму.
    *   Націсніце правай кнопкай на плэйліст -> "Share" -> "Copy link to playlist".
    *   ID — гэта набор сімвалаў пасля `playlist/`.

2.  **API-ключ Google Gemini:**
    *   Стварыце бясплатны ключ у **[Google AI Studio](https://aistudio.google.com/)**.

3.  **API-ключ Hugging Face + Доступы (ВАЖНА):**
    *   Стварыце токен у наладах вашага профілю на **[Hugging Face](https://huggingface.co/settings/tokens)** (тып `read`).
    *   **⚠️ АБАВЯЗКОВЫ КРОК:** Гэты праект выкарыстоўвае магутныя мадэлі **FLUX.1**. Каб яны працавалі, вы павінны перайсці па спасылках ніжэй і націснуць кнопку **"Agree and access repository"** (прыняць ліцэнзію):
        *   [Доступ да black-forest-labs/FLUX.1-dev](https://huggingface.co/black-forest-labs/FLUX.1-dev)
        *   [Доступ да black-forest-labs/FLUX.1-schnell](https://huggingface.co/black-forest-labs/FLUX.1-schnell)
    *   *Без гэтага кроку генерацыя вокладак будзе выдаваць памылку.*

---

### Частка 3: Даданне і налада AI-скрыптаў

1.  **Стварыце два новыя файлы ў праекце Goofy:**
    *   Націсніце на значок **`+`** побач з "Files" і абярыце **"Script"**.
    *   Стварыце файл з назвай **`AI_Плэйлісты`**.
    *   Паўтарыце працэс і стварыце другі файл з назвай **`AI_Генератар`**.

2.  **Дадайце код скрыптаў:**
    *   Скапіруйце змест файла `AI_Плэйлісты.gs` з гэтага рэпазіторыя і ўстаўце ў ваш адпаведны файл.
    *   Скапіруйце змест `AI_Генератар.gs` і ўстаўце ў ваш другі файл.

3.  **Наладзьце скрыпты:**
    *   У файле `AI_Плэйлісты.gs` знайдзіце блок `AI_CONFIG` і ўстаўце ID вашага штодзённага плэйліста.
    *   У файле `AI_Генератар.gs` вы знойдзеце блок `GENERATOR_CONFIG`. Вы будзеце змяняць яго кожны раз перад запускам, каб задаць патрэбны рэжым і тэму.
    *   **Захавайце абодва файлы** (<kbd>Ctrl</kbd>+<kbd>S</kbd>).

---

### Частка 4: Фінальная канфігурацыя

1.  **Дадайце API-ключы ва ўласцівасці скрыпта:**
    *   Перайдзіце ў **Налады праекта** (⚙️) -> **"Script Properties"**.
    *   Дадайце два ключы:
        *   `GEMINI_API_KEY`: ваш ключ ад Google Gemini.
        *   `HUGGINGFACE_API_KEY`: ваш токен ад Hugging Face.
    *   Захавайце ўласцівасці.

2.  **Дакладная налада пошуку (Рэкамендуецца):**
    *   Адкрыйце файл `config.gs` і дадайце ў функцыю `setProperties()` радок:
        ```javascript
        UserProperties.setProperty('MIN_DICE_RATING', '0.70');
        ```
    *   Гэта павысіць дакладнасць пошуку трэкаў.

---

### Частка 5: Запуск і аўтаматызацыя

#### Аўтаматызацыя штодзённага плэйліста (`AI_Плэйлісты.gs`)

1.  Перайдзіце ў раздзел **Трыгеры** (⏰).
2.  Стварыце **першы трыгер** для функцыі `generateAndCreateSpotifyPlaylist` з тыпам `Day timer` (напрыклад, кожную ноч).
3.  *Апцыянальна:* Стварыце **другі трыгер** для функцыі `cleanUpPlaylist` з тыпам `Hour timer` (напрыклад, кожную гадзіну).

#### Запуск універсальнага генератара (`AI_Генератар.gs`)

Гэты скрыпт запускаецца ўручную.

1.  Адкрыйце файл `AI_Генератар.gs`.
2.  Наладзьце блок `GENERATOR_CONFIG` пад вашу задачу (абярыце рэжым, задайце тэму ці ID плэйліста-ўзору).
3.  У выпадальным меню функцый уверсе абярыце `generateCustomPlaylist`.
4.  Націсніце кнопку **"Run"**.
5.  Сачыце за выкананнем у "Execution log" і чакайце вынік у Spotify.
